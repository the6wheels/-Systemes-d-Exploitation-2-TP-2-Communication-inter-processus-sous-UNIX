#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/wait.h>
int main()
{ 
  int desc[2];
  char message[100];
  pipe(desc);
  int x;
  x=fork();
  switch (x)
  {
     case -1:
       printf("erreur");
     break;

     case 0:

       
       close(desc[1]); //1 means writing so we will close it to read only
       read(desc[0],message,100);
       printf("I am the son and my PID is %d is my PPID is %d and I have received the following message:\n",getpid(),getppid());
       printf("%s",message);

     break;
     exit(0);
   
     default: 

       close(desc[0]); //0 means reading so we will close it to write only
       sprintf(message,"hi my son Im your father\n");
       write(desc[1],message,100);
       printf("I am the father and my PID is %d is my PPID is %d\n",getpid(),getppid());

   }
   return 0;

}
